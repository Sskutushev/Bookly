üöÄ –ü–†–û–ú–ü–¢ –î–õ–Ø –†–ê–ó–†–ê–ë–û–¢–ö–ò TELEGRAM MINI APP "BOOKLY"
üìã –û–ë–©–ê–Ø –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê
–°–æ–∑–¥–∞–π Telegram Mini App –¥–ª—è –æ–Ω–ª–∞–π–Ω-–±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∫–Ω–∏–≥ —Å–æ —Å–ª–µ–¥—É—é—â–µ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π:
bookly/
‚îú‚îÄ‚îÄ frontend/          # React + TypeScript + Vite + Tailwind
‚îú‚îÄ‚îÄ backend/           # Node.js + Express + Prisma + PostgreSQL  
‚îî‚îÄ‚îÄ telegram-bot/      # Python + python-telegram-bot

üé® –î–ò–ó–ê–ô–ù-–°–ò–°–¢–ï–ú–ê
–¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞
–°–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞:

Primary: #8B7FF5 (–º—è–≥–∫–∏–π —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
Secondary: #FF9B9B (–ø–µ—Ä—Å–∏–∫–æ–≤—ã–π)
Accent: #FFE45E (—Å–æ–ª–Ω–µ—á–Ω—ã–π –∂–µ–ª—Ç—ã–π)
Background: #F8F9FE (—Å–≤–µ—Ç–ª–æ-—Å–µ—Ä—ã–π —Å –≥–æ–ª—É–±—ã–º –æ—Ç—Ç–µ–Ω–∫–æ–º)
Cards: #FFFFFF —Å –ª–µ–≥–∫–æ–π —Ç–µ–Ω—å—é
Text Primary: #1A1A2E
Text Secondary: #6B7280

–¢–µ–º–Ω–∞—è —Ç–µ–º–∞:

Primary: #9B8AFF (—Å–≤–µ—Ç–ª–æ-—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
Secondary: #FF6B9D (—Ä–æ–∑–æ–≤—ã–π)
Accent: #FFD93D (–∑–æ–ª–æ—Ç–∏—Å—Ç—ã–π)
Background: #0F0F1E (–≥–ª—É–±–æ–∫–∏–π —Ç–µ–º–Ω–æ-—Å–∏–Ω–∏–π)
Cards: #1A1A2E —Å –Ω–µ–æ–Ω–æ–≤—ã–º —Å–≤–µ—á–µ–Ω–∏–µ–º
Text Primary: #FFFFFF
Text Secondary: #9CA3AF

–í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
–ì—Ä–∞–¥–∏–µ–Ω—Ç—ã:
css/_ Hero –≥—Ä–∞–¥–∏–µ–Ω—Ç _/
background: linear-gradient(135deg, #8B7FF5 0%, #FF9B9B 100%);

/_ –ö–∞—Ä—Ç–æ—á–∫–∞ –∫–Ω–∏–≥–∏ (hover) _/
background: linear-gradient(180deg, transparent 0%, rgba(139,127,245,0.1) 100%);

/_ –ù–µ–æ–Ω–æ–≤–æ–µ —Å–≤–µ—á–µ–Ω–∏–µ (—Ç–µ–º–Ω–∞—è —Ç–µ–º–∞) _/
box-shadow: 0 0 20px rgba(155,138,255,0.3);
–ê–Ω–∏–º–∞—Ü–∏–∏:

–ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫: opacity + translateY (stagger –ø–æ 0.1s)
Hover —ç—Ñ—Ñ–µ–∫—Ç –∫–Ω–∏–≥: scale(1.05) + shadow —É–≤–µ–ª–∏—á–µ–Ω–∏–µ
Skeleton loading –¥–ª—è –æ–±–ª–æ–∂–µ–∫
Ripple —ç—Ñ—Ñ–µ–∫—Ç –Ω–∞ –∫–Ω–æ–ø–∫–∞—Ö

Bento-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
–†–∞–∑–º–µ—Ä—ã –∫–∞—Ä—Ç–æ—á–µ–∫:

Desktop: Book card = 220px √ó 320px
Mobile: Book card = 140px √ó 200px
Popup Desktop: max-width: 1000px
Popup Mobile: max-width: 350px

–°–∫—Ä—É–≥–ª–µ–Ω–∏—è:
cssborder-radius: 24px; /_ –û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ _/
border-radius: 16px; /_ –ö–Ω–æ–ø–∫–∏ –∏ –∏–Ω–ø—É—Ç—ã _/
border-radius: 12px; /_ –ú–µ–ª–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã _/


üéØ –≠–¢–ê–ü 1: –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ü–†–û–ï–ö–¢–ê
–®–∞–≥ 1.1: –°–æ–∑–¥–∞–Ω–∏–µ Frontend
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Vite –∏ TypeScript –¥–ª—è Telegram Mini App —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ app/                  # Providers, routing
‚îÇ   ‚îú‚îÄ‚îÄ pages/                # HomePage, FavoritesPage, MyBooksPage, ProfilePage
‚îÇ   ‚îú‚îÄ‚îÄ widgets/              # BookGrid, BookModal, ProfileSidebar
‚îÇ   ‚îú‚îÄ‚îÄ features/             # auth, book-reader, payment, favorites
‚îÇ   ‚îú‚îÄ‚îÄ entities/             # book, user (store, types, api)
‚îÇ   ‚îî‚îÄ‚îÄ shared/               # ui, api, lib, config
‚îú‚îÄ‚îÄ tailwind.config.js
‚îú‚îÄ‚îÄ vite.config.ts
‚îî‚îÄ‚îÄ package.json

–£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- React 18.3, TypeScript 5.3, Vite 5.0
- Tailwind CSS 3.4
- Zustand (state management)
- TanStack Query (server state)
- React Router DOM
- Axios
- React Hook Form + Zod
- Framer Motion (–∞–Ω–∏–º–∞—Ü–∏–∏)
- React Hot Toast (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)

–ù–∞—Å—Ç—Ä–æ–π Tailwind —Å –∫–∞—Å—Ç–æ–º–Ω–æ–π —Ç–µ–º–æ–π:
- Primary: #8B7FF5
- Secondary: #FF9B9B
- Accent: #FFE45E
- Background Light: #F8F9FE
- Background Dark: #0F0F1E
- Border radius: 24px –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫, 16px –¥–ª—è –∫–Ω–æ–ø–æ–∫

–ù–∞—Å—Ç—Ä–æ–π Vite –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Telegram Web App:
- –î–æ–±–∞–≤—å –≤ index.html —Å–∫—Ä–∏–ø—Ç: https://telegram.org/js/telegram-web-app.js
- –°–æ–∑–¥–∞–π —Ç–∏–ø—ã –¥–ª—è window.Telegram.WebApp
–®–∞–≥ 1.2: –°–æ–∑–¥–∞–Ω–∏–µ Backend
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π Node.js + Express backend —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

backend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ routes/           # auth, books, payment, user, favorites
‚îÇ   ‚îú‚îÄ‚îÄ controllers/      # –õ–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ services/         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ middleware/       # Auth, error handling, validation
‚îÇ   ‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schema.prisma # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ utils/            # Helpers
‚îÇ   ‚îî‚îÄ‚îÄ server.ts
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ package.json

–£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–µ–Ω—Ü–∏–∏:
- Express, TypeScript
- Prisma, @prisma/client
- JWT: jsonwebtoken
- bcrypt (—Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π)
- crypto (–¥–ª—è Telegram auth –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
- cors, helmet, express-rate-limit
- dotenv

–°–æ–∑–¥–∞–π Prisma —Å—Ö–µ–º—É —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –º–æ–¥–µ–ª—è–º–∏:
- User (id, email, password, name, avatar, telegram_id, twoFactorSecret)
- Book (id, title, author, description, coverUrl, pdfUrl, price, isFree, pageCount)
- Genre (id, name) - —Å–≤—è–∑—å many-to-many —Å Book
- Favorite (userId, bookId) - —Å–≤—è–∑—å —Å User –∏ Book
- Purchase (id, userId, bookId, amount, paymentMethod, status, transactionId)
- ReadingProgress (userId, bookId, currentPage, progress, lastReadAt)
- NotificationSettings (userId, newBooksInGenre, unfinishedReminder, frequency, telegramEnabled)
–®–∞–≥ 1.3: –°–æ–∑–¥–∞–Ω–∏–µ Telegram Bot
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π Python Telegram –±–æ—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:

telegram-bot/
‚îú‚îÄ‚îÄ bot.py              # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ handlers/           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ notifications.py    # –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îú‚îÄ‚îÄ scheduler.py        # APScheduler –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îî‚îÄ‚îÄ requirements.txt

–£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- python-telegram-bot
- APScheduler
- psycopg2 (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å PostgreSQL)
- requests
- python-dotenv

–†–µ–∞–ª–∏–∑—É–π –∫–æ–º–∞–Ω–¥—ã:
- /start - –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –∫–Ω–æ–ø–∫–∞ "–û—Ç–∫—Ä—ã—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É" (web_app)
- /library - –û—Ç–∫—Ä—ã—Ç—å Mini App –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ "–ú–æ–∏ –∫–Ω–∏–≥–∏"
- /help - –°–ø—Ä–∞–≤–∫–∞

–ù–∞—Å—Ç—Ä–æ–π WebAppInfo –¥–ª—è –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫, —É–∫–∞–∑—ã–≤–∞—é—â–∏—Ö –Ω–∞ MINI_APP_URL

üé® –≠–¢–ê–ü 2: –ò–ù–¢–ï–ì–†–ê–¶–ò–Ø TELEGRAM WEB APP API
–®–∞–≥ 2.1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram SDK
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π —Ñ–∞–π–ª frontend/src/shared/lib/telegram-app.ts

–†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é initTelegramApp() –∫–æ—Ç–æ—Ä–∞—è:
1. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å window.Telegram.WebApp
2. –í—ã–∑—ã–≤–∞–µ—Ç tg.ready() –∏ tg.expand()
3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Ü–≤–µ—Ç–∞: setHeaderColor('#8B7FF5'), setBackgroundColor()
4. –ü—Ä–∏–º–µ–Ω—è–µ—Ç —Ç–µ–º—É Telegram —á–µ—Ä–µ–∑ tg.themeParams –∫ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º
5. –°–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è themeChanged –∏ viewportChanged
6. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏: user, startParam, colorScheme, platform

–°–æ–∑–¥–∞–π —Ç–∏–ø—ã TypeScript –¥–ª—è –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ Telegram WebApp API:
- MainButton, BackButton, SettingsButton
- HapticFeedback
- CloudStorage
- showPopup, showAlert, showConfirm
- openInvoice, openLink

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É tg = window.Telegram.WebApp –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
–®–∞–≥ 2.2: –°–æ–∑–¥–∞–Ω–∏–µ Helpers –¥–ª—è Telegram UI
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π —Å–ª–µ–¥—É—é—â–∏–µ —É—Ç–∏–ª–∏—Ç—ã:

1. telegram-main-button.ts - –∫–ª–∞—Å—Å TelegramMainButton:
   - show(text, onClick) - –ø–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É
   - hide() - —Å–∫—Ä—ã—Ç—å
   - showProgress() / hideProgress()
   - enable() / disable()

2. haptic.ts - –æ–±—ä–µ–∫—Ç haptic —Å –º–µ—Ç–æ–¥–∞–º–∏:
   - light(), medium(), heavy() - –≤–∏–±—Ä–∞—Ü–∏—è
   - success(), warning(), error() - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - selection() - –≤—ã–±–æ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞

3. telegram-dialogs.ts - —Ñ—É–Ω–∫—Ü–∏–∏:
   - alert(message) - –ø—Ä–æ—Å—Ç–æ–π –∞–ª–µ—Ä—Ç
   - confirm(message) - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ  
   - popup(params) - –∫–∞—Å—Ç–æ–º–Ω—ã–π popup —Å –∫–Ω–æ–ø–∫–∞–º–∏

4. telegram-storage.ts - –æ–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ CloudStorage:
   - set(key, value) - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å
   - get(key) - –ø–æ–ª—É—á–∏—Ç—å
   - remove(key) - —É–¥–∞–ª–∏—Ç—å
   - getKeys() - —Å–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π

–í—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å Promise –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å haptic feedback
–®–∞–≥ 2.3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ App –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
–ü—Ä–æ–º–ø—Ç:
–í frontend/src/app/App.tsx:

1. –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤—ã–∑–æ–≤–∏ initTelegramApp()
2. –ü—Ä–∏–º–µ–Ω–∏ —Ç–µ–º—É Telegram –∫ document.documentElement (–¥–æ–±–∞–≤—å/—É–±–µ—Ä–∏ –∫–ª–∞—Å—Å 'dark')
3. –°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç TelegramBackButton, –∫–æ—Ç–æ—Ä—ã–π:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç tg.BackButton –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –∫—Ä–æ–º–µ –≥–ª–∞–≤–Ω–æ–π
   - –ü—Ä–∏ –∫–ª–∏–∫–µ –¥–µ–ª–∞–µ—Ç navigate(-1) —Å haptic.light()
4. –°–æ–∑–¥–∞–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç TelegramSettingsButton:
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç tg.SettingsButton
   - –ü—Ä–∏ –∫–ª–∏–∫–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç /profile

–û–±–µ—Ä–Ω–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ providers:
- TelegramProvider (–∫–æ–Ω—Ç–µ–∫—Å—Ç —Å tg –¥–∞–Ω–Ω—ã–º–∏)
- QueryClientProvider (TanStack Query)
- Router (React Router)

üîê –≠–¢–ê–ü 3: –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò
–®–∞–≥ 3.1: Backend - –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram InitData
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π backend/src/middleware/telegram-auth.ts

–†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏—é validateTelegramWebAppData(initData: string):
1. –ü–∞—Ä—Å–∏ initData –∫–∞–∫ URLSearchParams
2. –ò–∑–≤–ª–µ–∫–∏ hash, —É–¥–∞–ª–∏ –µ–≥–æ –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
3. –û—Ç—Å–æ—Ä—Ç–∏—Ä—É–π –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ —Å–æ–∑–¥–∞–π data_check_string
4. –°–æ–∑–¥–∞–π secret_key = HMAC-SHA256('WebAppData', BOT_TOKEN)
5. –í—ã—á–∏—Å–ª–∏ calculated_hash = HMAC-SHA256(data_check_string, secret_key)
6. –°—Ä–∞–≤–Ω–∏ calculated_hash —Å –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–º hash
7. –ü—Ä–æ–≤–µ—Ä—å auth_date (–Ω–µ —Å—Ç–∞—Ä—à–µ 24 —á–∞—Å–æ–≤)

–°–æ–∑–¥–∞–π middleware telegramAuthMiddleware:
1. –ß–∏—Ç–∞–π initData –∏–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ X-Telegram-Init-Data
2. –í–∞–ª–∏–¥–∏—Ä—É–π —á–µ—Ä–µ–∑ validateTelegramWebAppData()
3. –ò–∑–≤–ª–µ–∫–∏ user –∏–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ 'user' (JSON.parse)
4. –î–æ–±–∞–≤—å user –≤ req.telegramUser
5. –ü—Ä–∏ –æ—à–∏–±–∫–µ –≤–æ–∑–≤—Ä–∞—â–∞–π 401 Unauthorized
–®–∞–≥ 3.2: Backend - Auth Routes
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π backend/src/routes/auth.routes.ts

–†–µ–∞–ª–∏–∑—É–π —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

POST /api/auth/telegram:
1. –ü–æ–ª—É—á–∏ initData –∏–∑ body
2. –í–∞–ª–∏–¥–∏—Ä—É–π —á–µ—Ä–µ–∑ validateTelegramWebAppData()
3. –ò–∑–≤–ª–µ–∫–∏ telegram_id –∏–∑ user
4. –ù–∞–π–¥–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î:
   - –ï—Å–ª–∏ –µ—Å—Ç—å —Å —Ç–∞–∫–∏–º telegram_id ‚Üí –ª–æ–≥–∏–Ω
   - –ï—Å–ª–∏ –Ω–µ—Ç ‚Üí —Å–æ–∑–¥–∞–π (email = telegram_id@bookly.internal)
5. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π JWT —Ç–æ–∫–µ–Ω—ã (access + refresh)
6. –í–µ—Ä–Ω–∏ —Ç–æ–∫–µ–Ω—ã + user –¥–∞–Ω–Ω—ã–µ

POST /api/auth/refresh:
1. –ü—Ä–æ–≤–µ—Ä—å refresh token
2. –í—ã–¥–∞–π –Ω–æ–≤—ã–π access token

POST /api/auth/logout:
1. –ò–Ω–≤–∞–ª–∏–¥–∏—Ä—É–π refresh token
–®–∞–≥ 3.3: Frontend - Auth Flow
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π frontend/src/features/auth/model/use-auth.ts

–†–µ–∞–ª–∏–∑—É–π —Ö—É–∫ useAuth():
1. –ü—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤—å tg.initData –Ω–∞ /api/auth/telegram
2. –°–æ—Ö—Ä–∞–Ω–∏ —Ç–æ–∫–µ–Ω—ã –≤ localStorage
3. –°–æ—Ö—Ä–∞–Ω–∏ user –≤ Zustand store
4. –ù–∞—Å—Ç—Ä–æ–π axios interceptor:
   - –î–æ–±–∞–≤–ª—è–π X-Telegram-Init-Data –≤ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å
   - –î–æ–±–∞–≤–ª—è–π Authorization: Bearer {access_token}
   - –ü—Ä–∏ 401 –ø—Ä–æ–±—É–π –æ–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ /api/auth/refresh
   - –ï—Å–ª–∏ refresh failed ‚Üí logout –∏ tg.close()

–°–æ–∑–¥–∞–π auth store (Zustand):
- State: user, isAuthenticated, isLoading
- Actions: login, logout, updateUser

üìö –≠–¢–ê–ü 4: –û–°–ù–û–í–ù–û–ô –§–£–ù–ö–¶–ò–û–ù–ê–õ - –ö–ù–ò–ì–ò
–®–∞–≥ 4.1: Backend - Books API
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π backend/src/routes/books.routes.ts

–†–µ–∞–ª–∏–∑—É–π —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:

GET /api/books?genre=&search=&page=&limit=:
1. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∂–∞–Ω—Ä—É (—á–µ—Ä–µ–∑ Prisma include)
2. –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∏ –∞–≤—Ç–æ—Ä—É (—á–µ—Ä–µ–∑ Prisma contains)
3. –ü–∞–≥–∏–Ω–∞—Ü–∏—è (skip, take)
4. –í–µ—Ä–Ω–∏: books[], total, currentPage, totalPages

GET /api/books/:id:
1. –ù–∞–π–¥–∏ –∫–Ω–∏–≥—É —Å –∂–∞–Ω—Ä–∞–º–∏
2. –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω - –ø—Ä–æ–≤–µ—Ä—å isFavorite –∏ isPurchased
3. –í–µ—Ä–Ω–∏ –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ

GET /api/books/:id/fragment:
1. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 15 —Å—Ç—Ä–∞–Ω–∏—Ü)
2. –í–µ—Ä–Ω–∏ PDF base64 –∏–ª–∏ URL —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º

GET /api/genres:
1. –í–µ—Ä–Ω–∏ –≤—Å–µ –∂–∞–Ω—Ä—ã —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∫–Ω–∏–≥
–®–∞–≥ 4.2: Frontend - Home Page
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π frontend/src/pages/HomePage/HomePage.tsx

–†–µ–∞–ª–∏–∑—É–π:
1. Header (fixed, backdrop-blur):
   - Logo "Bookly"
   - Search input —Å –¥–µ–±–∞—É–Ω—Å–æ–º 500ms
   - Avatar/Login –∫–Ω–æ–ø–∫–∞

2. –§–∏–ª—å—Ç—Ä—ã –∂–∞–Ω—Ä–æ–≤ (horizontal scroll):
   - Pills —Å –∞–∫—Ç–∏–≤–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
   - –ö–ª–∏–∫ = –∑–∞–ø—Ä–æ—Å —Å —Ñ–∏–ª—å—Ç—Ä–æ–º + haptic.selection()

3. Book Grid (Bento Layout):
   - Desktop: grid-cols-3
   - Mobile: grid-cols-2
   - Gap: 16px
   - Infinite scroll –∏–ª–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è

4. BookCard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç:
   - –û–±–ª–æ–∂–∫–∞ (aspect-ratio 2/3)
   - Badge "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ" / "299‚ÇΩ"
   - –ò–∫–æ–Ω–∫–∞ ‚ù§Ô∏è (–∏–∑–±—Ä–∞–Ω–Ω–æ–µ) —Å haptic.light()
   - Hover: scale(1.05) + shadow
   - onClick: –æ—Ç–∫—Ä—ã—Ç—å BookModal + haptic.medium()

–ò—Å–ø–æ–ª—å–∑—É–π TanStack Query –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∫–Ω–∏–≥:
- useInfiniteQuery –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Å–∫—Ä–æ–ª–ª–∞
- –í–∫–ª—é—á–∏ suspense –∏ error boundaries
- Skeleton loader –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
–®–∞–≥ 4.3: Frontend - Book Modal
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π frontend/src/widgets/BookModal/BookModal.tsx

–†–µ–∞–ª–∏–∑—É–π –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å:
1. Layout:
   - Desktop: flex row (–æ–±–ª–æ–∂–∫–∞ —Å–ª–µ–≤–∞, –∏–Ω—Ñ–æ —Å–ø—Ä–∞–≤–∞), max-width 1000px
   - Mobile: flex column, max-width 350px
   - –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è [√ó] –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É

2. –ö–æ–Ω—Ç–µ–Ω—Ç:
   - –û–±–ª–æ–∂–∫–∞ –∫–Ω–∏–≥–∏ (220x320 desktop, 140x200 mobile)
   - –ù–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä
   - –û–ø–∏—Å–∞–Ω–∏–µ (2-3 —Å—Ç—Ä–æ–∫–∏)
   - –ñ–∞–Ω—Ä—ã (pills)

3. –î–µ–π—Å—Ç–≤–∏—è:
   - –ö–Ω–æ–ø–∫–∞ "–ß–∏—Ç–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç" ‚Üí navigate('/reader/{id}?fragment=true')
   - –ö–Ω–æ–ø–∫–∞ "–ß–∏—Ç–∞—Ç—å" / "–ö—É–ø–∏—Ç—å":
     * –ï—Å–ª–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è ‚Üí –¥–æ–±–∞–≤–∏—Ç—å –≤ myBooks –∏ –æ—Ç–∫—Ä—ã—Ç—å reader
     * –ï—Å–ª–∏ –ø–ª–∞—Ç–Ω–∞—è –∏ –Ω–µ –∫—É–ø–ª–µ–Ω–∞ ‚Üí –æ—Ç–∫—Ä—ã—Ç—å PaymentModal
     * –ï—Å–ª–∏ –∫—É–ø–ª–µ–Ω–∞ ‚Üí –æ—Ç–∫—Ä—ã—Ç—å reader

4. –ò—Å–ø–æ–ª—å–∑—É–π Headless UI Dialog –¥–ª—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏
5. –î–æ–±–∞–≤—å Framer Motion –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏/–∑–∞–∫—Ä—ã—Ç–∏–∏
6. –ü—Ä–∏ —É—Å–ø–µ—à–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö –ø–æ–∫–∞–∑—ã–≤–∞–π toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

üí≥ –≠–¢–ê–ü 5: –°–ò–°–¢–ï–ú–ê –û–ü–õ–ê–¢–´
–®–∞–≥ 5.1: Backend - Payment —Å Telegram Stars
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π backend/src/routes/payment.routes.ts

–ò—Å–ø–æ–ª—å–∑—É–π Grammy (Telegram Bot Framework) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è invoice.

POST /api/payment/create-invoice:
1. –ü–æ–ª—É—á–∏ bookId –∏ userId –∏–∑ req
2. –ù–∞–π–¥–∏ –∫–Ω–∏–≥—É –≤ –ë–î
3. –°–æ–∑–¥–∞–π invoice —á–µ—Ä–µ–∑ bot.api.createInvoiceLink():
   - title: book.title
   - description: "–ê–≤—Ç–æ—Ä: " + book.author
   - payload: JSON.stringify({ bookId, userId })
   - currency: 'XTR' (Telegram Stars)
   - prices: [{ label: book.title, amount: book.price * 100 }]
   - photo_url: book.coverUrl
4. –í–µ—Ä–Ω–∏ invoiceLink –∫–ª–∏–µ–Ω—Ç—É

POST /api/payment/webhook (–¥–ª—è Telegram):
1. –û–±—Ä–∞–±–æ—Ç–∞–π pre_checkout_query:
   - –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ —á–µ—Ä–µ–∑ bot.api.answerPreCheckoutQuery(query_id, true)
2. –û–±—Ä–∞–±–æ—Ç–∞–π successful_payment:
   - –ü–∞—Ä—Å–∏ payload (bookId, userId)
   - –°–æ–∑–¥–∞–π Purchase –≤ –ë–î (status: completed)
   - –û—Ç–ø—Ä–∞–≤—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å –∫–Ω–æ–ø–∫–æ–π "–û—Ç–∫—Ä—ã—Ç—å –∫–Ω–∏–≥—É"

–ù–∞—Å—Ç—Ä–æ–π webhook URL –≤ Telegram Bot API
–®–∞–≥ 5.2: Frontend - Payment Modal
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π frontend/src/features/payment/ui/PaymentModal.tsx

–†–µ–∞–ª–∏–∑—É–π –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ:
1. –û—Ç–æ–±—Ä–∞–∂–∞–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–Ω–∏–≥–µ (–º–∏–Ω–∏-–ø—Ä–µ–≤—å—é)
2. –ü–æ–∫–∞–∂–∏ —Ü–µ–Ω—É –∫—Ä—É–ø–Ω–æ
3. –ö–Ω–æ–ø–∫–∞ "–û–ø–ª–∞—Ç–∏—Ç—å —á–µ—Ä–µ–∑ Telegram Stars"
4. –ü—Ä–∏ –∫–ª–∏–∫–µ:
   - –ó–∞–ø—Ä–æ—Å–∏ /api/payment/create-invoice
   - –û—Ç–∫—Ä–æ–π tg.openInvoice(invoiceLink, callback)
   - –í callback –æ–±—Ä–∞–±–æ—Ç–∞–π —Å—Ç–∞—Ç—É—Å—ã:
     * 'paid' ‚Üí haptic.success() + popup "–ö–Ω–∏–≥–∞ –∫—É–ø–ª–µ–Ω–∞!" + navigate to reader
     * 'cancelled' ‚Üí haptic.warning() + –∑–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª–∫—É
     * 'failed' ‚Üí haptic.error() + –ø–æ–∫–∞–∑–∞—Ç—å alert —Å –æ—à–∏–±–∫–æ–π

–ò—Å–ø–æ–ª—å–∑—É–π Telegram Main Button –≤–º–µ—Å—Ç–æ custom –∫–Ω–æ–ø–∫–∏:
- –ü—Ä–∏ –æ—Ç–∫—Ä—ã—Ç–∏–∏ –º–æ–¥–∞–ª–∫–∏: mainButton.show('–û–ø–ª–∞—Ç–∏—Ç—å {price}‚ÇΩ', handlePayment)
- –ü—Ä–∏ –∑–∞–∫—Ä—ã—Ç–∏–∏: mainButton.hide()
- –í–æ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏: mainButton.showProgress()

üìñ –≠–¢–ê–ü 6: READER (–ß–¢–ï–ù–ò–ï –ö–ù–ò–ì)
–®–∞–≥ 6.1: Backend - Reader API
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π backend/src/routes/reader.routes.ts

GET /api/books/:id/read:
1. –ü—Ä–æ–≤–µ—Ä—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞:
   - –ï—Å–ª–∏ –∫–Ω–∏–≥–∞ –±–µ—Å–ø–ª–∞—Ç–Ω–∞—è ‚Üí —Ä–∞–∑—Ä–µ—à–∏—Ç—å
   - –ï—Å–ª–∏ –ø–ª–∞—Ç–Ω–∞—è ‚Üí –ø—Ä–æ–≤–µ—Ä–∏—Ç—å Purchase (userId, bookId, status: completed)
2. –í–µ—Ä–Ω–∏ PDF URL (signed URL –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å S3)
3. –ò–ª–∏ –≤–µ—Ä–Ω–∏ base64 encoded PDF –ø–æ —á–∞—Å—Ç—è–º (chunked)

POST /api/progress/:bookId:
1. –°–æ—Ö—Ä–∞–Ω–∏ —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏ –ø—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—á—Ç–µ–Ω–∏—è
2. –û–±–Ω–æ–≤–∏ lastReadAt
3. –ò—Å–ø–æ–ª—å–∑—É–π upsert (—Å–æ–∑–¥–∞–π –∏–ª–∏ –æ–±–Ω–æ–≤–∏)

GET /api/progress/:bookId:
1. –í–µ—Ä–Ω–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –ø—Ä–æ–≥—Ä–µ—Å—Å (currentPage, progress)
–®–∞–≥ 6.2: Frontend - Reader Component
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π frontend/src/features/book-reader/ui/Reader.tsx

–†–µ–∞–ª–∏–∑—É–π:
1. Layout:
   - Header: Back button (–∏—Å–ø–æ–ª—å–∑—É–π tg.BackButton), –Ω–∞–∑–≤–∞–Ω–∏–µ –∫–Ω–∏–≥–∏, settings
   - Main: PDF Viewer –æ–±–ª–∞—Å—Ç—å
   - Footer: –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü + progress bar

2. PDF Rendering:
   - –ò—Å–ø–æ–ª—å–∑—É–π react-pdf –∏–ª–∏ PDF.js
   - –ó–∞–≥—Ä—É–∂–∞–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ –º–µ—Ä–µ —Å–∫—Ä–æ–ª–ª–∞ (lazy loading)
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

3. –ù–∞–≤–∏–≥–∞—Ü–∏—è:
   - Swipe –≤–ª–µ–≤–æ/–≤–ø—Ä–∞–≤–æ (mobile) - –∏—Å–ø–æ–ª—å–∑—É–π react-swipeable
   - –ö–Ω–æ–ø–∫–∏ [‚Üê] [‚Üí] (desktop)
   - Progress bar –≤–Ω–∏–∑—É (–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ = % –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–≥–æ)

4. Settings Modal:
   - –†–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞: S / M / L / XL
   - –®—Ä–∏—Ñ—Ç: Serif / Sans / Mono
   - –¢–µ–º–∞: Light / Dark / Sepia
   - –Ø—Ä–∫–æ—Å—Ç—å: slider
   - –°–æ—Ö—Ä–∞–Ω—è–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ tg.CloudStorage

5. –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:
   - Debounced –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (500ms)
   - POST /api/progress/:bookId

6. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:
   - –û—Ç–∫–ª—é—á–∏ body scroll
   - –ò—Å–ø–æ–ª—å–∑—É–π transform –¥–ª—è –ø–ª–∞–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
   - Preload —Å–ª–µ–¥—É—é—â–µ–π/–ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã

‚≠ê –≠–¢–ê–ü 7: –ò–ó–ë–†–ê–ù–ù–û–ï –ò –ú–û–ò –ö–ù–ò–ì–ò
–®–∞–≥ 7.1: Backend - Favorites & My Books
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π backend/src/routes/favorites.routes.ts

GET /api/favorites:
1. –í–µ—Ä–Ω–∏ —Å–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. Include book –¥–∞–Ω–Ω—ã–µ –∏ –∂–∞–Ω—Ä—ã
3. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ createdAt DESC

POST /api/favorites/:bookId:
1. –°–æ–∑–¥–∞–π –∑–∞–ø–∏—Å—å Favorite (userId, bookId)
2. Handle duplicate (unique constraint) - –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å

DELETE /api/favorites/:bookId:
1. –£–¥–∞–ª–∏ –∑–∞–ø–∏—Å—å –∏–∑ Favorite

–°–æ–∑–¥–∞–π backend/src/routes/my-books.routes.ts

GET /api/my-books:
1. –ù–∞–π–¥–∏ –≤—Å–µ –∫–Ω–∏–≥–∏ –≥–¥–µ:
   - User has Purchase (completed) OR
   - Book isFree AND user has ReadingProgress
2. Include progress –¥–∞–Ω–Ω—ã–µ
3. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å—É:
   - reading: progress > 0 AND < 100
   - finished: progress = 100
   - purchased: –≤—Å–µ –∫—É–ø–ª–µ–Ω–Ω—ã–µ
–®–∞–≥ 7.2: Frontend - Favorites Page
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π frontend/src/pages/FavoritesPage/FavoritesPage.tsx

–†–µ–∞–ª–∏–∑—É–π:
1. Header —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "‚≠ê –ò–∑–±—Ä–∞–Ω–Ω–æ–µ"
2. –§–∏–ª—å—Ç—Ä—ã:
   - –ü–æ –∂–∞–Ω—Ä—É (dropdown)
   - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: –ü–æ –¥–∞—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è / –ü–æ –Ω–∞–∑–≤–∞–Ω–∏—é / –ü–æ –∞–≤—Ç–æ—Ä—É
3. Bento Grid –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ HomePage
4. –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
   - –ò–∫–æ–Ω–∫–∞ üìö
   - –¢–µ–∫—Å—Ç "–ó–¥–µ—Å—å –ø–æ–∫–∞ –ø—É—Å—Ç–æ"
   - –û–ø–∏—Å–∞–Ω–∏–µ "–î–æ–±–∞–≤–ª—è–π—Ç–µ –∫–Ω–∏–≥–∏ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ"
5. –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ —Å–ø–∏—Å–∫–∞ –ø—Ä–∏ —Å–Ω—è—Ç–∏–∏ ‚ù§Ô∏è
–®–∞–≥ 7.3: Frontend - My Books Page
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π frontend/src/pages/MyBooksPage/MyBooksPage.tsx

–†–µ–∞–ª–∏–∑—É–π:
1. Header —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "üìö –ú–æ–∏ –∫–Ω–∏–≥–∏"
2. –¢–∞–±—ã (Pills):
   - –í—Å–µ
   - –ß–∏—Ç–∞—é (progress > 0 && < 100)
   - –ü—Ä–æ—á–∏—Ç–∞–Ω–æ (progress = 100)
   - –ö—É–ø–ª–µ–Ω–æ (–≤—Å–µ purchased)
3. Book Cards —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
   - Progress bar –≤–Ω–∏–∑—É –∫–∞—Ä—Ç–æ—á–∫–∏
   - –ü—Ä–æ—Ü–µ–Ω—Ç –ø—Ä–æ—á—Ç–µ–Ω–∏—è: "60%"
   - Badge "–ü—Ä–æ—á–∏—Ç–∞–Ω–æ" –¥–ª—è 100%
4. –ö–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É ‚Üí –æ—Ç–∫—Ä—ã—Ç—å reader –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
5. Long press ‚Üí –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é:
   - –£–¥–∞–ª–∏—Ç—å –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ (—Å confirm)
   - –î–æ–±–∞–≤–∏—Ç—å/—É–±—Ä–∞—Ç—å –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

–ò—Å–ø–æ–ª—å–∑—É–π react-long-press –¥–ª—è long press detection

üë§ –≠–¢–ê–ü 8: –ü–†–û–§–ò–õ–¨ –ò –ù–ê–°–¢–†–û–ô–ö–ò
–®–∞–≥ 8.1: Backend - Profile API
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π backend/src/routes/user.routes.ts

GET /api/user/profile:
1. –í–µ—Ä–Ω–∏ –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. Include: NotificationSettings

PATCH /api/user/profile:
1. –û–±–Ω–æ–≤–∏ name, avatar (URL –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏)
2. –í–∞–ª–∏–¥–∞—Ü–∏—è —á–µ—Ä–µ–∑ Zod

POST /api/user/avatar:
1. –ü—Ä–∏–º–∏ multipart/form-data
2. –ó–∞–≥—Ä—É–∑–∏ –≤ S3/Cloudflare R2
3. –í–µ—Ä–Ω–∏ URL
4. –û–±–Ω–æ–≤–∏ user.avatar –≤ –ë–î

GET /api/user/purchases:
1. –í–µ—Ä–Ω–∏ –∏—Å—Ç–æ—Ä–∏—é –ø–æ–∫—É–ø–æ–∫
2. Include book –¥–∞–Ω–Ω—ã–µ
3. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ createdAt DESC

PATCH /api/notifications/settings:
1. –û–±–Ω–æ–≤–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. Fields: newBooksInGenre, unfinishedReminder, specialOffers, frequency
–®–∞–≥ 8.2: Frontend - Profile Page
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π frontend/src/pages/ProfilePage/ProfilePage.tsx

Layout:
1. Desktop: Sidebar (300px) + Content Area
2. Mobile: Full width —Å —Ç–∞–±–∞–º–∏

Sidebar –º–µ–Ω—é:
- –ê–≤–∞—Ç–∞—Ä + –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ú–æ–∏ –ø–æ–∫—É–ø–∫–∏
- –í—Ö–æ–¥ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ü–æ–º–æ—â—å
- –í—ã–π—Ç–∏ (–∫—Ä–∞—Å–Ω–∞—è –∫–Ω–æ–ø–∫–∞)

–†–µ–∞–ª–∏–∑—É–π —Å–µ–∫—Ü–∏–∏:

1. –ú–æ–∏ –ø–æ–∫—É–ø–∫–∏:
   - –°–ø–∏—Å–æ–∫ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –∫–Ω–∏–≥–∞–º–∏
   - –î–ª—è –∫–∞–∂–¥–æ–π: –Ω–∞–∑–≤–∞–Ω–∏–µ, –∞–≤—Ç–æ—Ä, —Ü–µ–Ω–∞, –¥–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏
   - –ö–ª–∏–∫ ‚Üí –æ—Ç–∫—Ä—ã—Ç—å –∫–Ω–∏–≥—É

2. –í—Ö–æ–¥ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
   - Email (–ø–æ–∫–∞–∑–∞—Ç—å, –∫–Ω–æ–ø–∫–∞ "–ò–∑–º–µ–Ω–∏—Ç—å")
   - –ü–∞—Ä–æ–ª—å (‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢, –∫–Ω–æ–ø–∫–∞ "–ò–∑–º–µ–Ω–∏—Ç—å")
   - 2FA (toggle + setup modal —Å QR –∫–æ–¥–æ–º)
   - –ü—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã (Telegram: @username, –∫–Ω–æ–ø–∫–∞ "–û—Ç–≤—è–∑–∞—Ç—å")

3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
   - –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
   - Radio buttons –¥–ª—è —á–∞—Å—Ç–æ—Ç—ã (daily / 3days / weekly)
   - Toggle –¥–ª—è Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

4. –ü–æ–º–æ—â—å:
   - Bento –∫–∞—Ä—Ç–æ—á–∫–∏ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
   - Accordion –¥–ª—è —Ä–∞—Å–∫—Ä—ã—Ç–∏—è –¥–µ—Ç–∞–ª–µ–π
   - –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ò—Å–ø–æ–ª—å–∑—É–π React Hook Form –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

ü§ñ –≠–¢–ê–ü 9: TELEGRAM BOT - –£–í–ï–î–û–ú–õ–ï–ù–ò–Ø
–®–∞–≥ 9.1: –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
–ü—Ä–æ–º–ø—Ç:
–°–æ–∑–¥–∞–π telegram-bot/notifications.py

–†–µ–∞–ª–∏–∑—É–π —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π:

1. send_inactive_reminder(user_id, genre, new_books_count):
   - –¢–µ–∫—Å—Ç: "üìö –ü—Ä–∏–≤–µ—Ç! –ú—ã —Å–∫—É—á–∞–ª–∏ –ø–æ —Ç–µ–±–µ. –í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –ø–æ—è–≤–∏–ª–æ—Å—å {count} –Ω–æ–≤—ã—Ö –∫–Ω–∏–≥ –≤ –∂–∞–Ω—Ä–µ {genre}"
   - –ö–Ω–æ–ø–∫–∞: "–û—Ç–∫—Ä—ã—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É" (web_app ‚Üí MINI_APP_URL)
   - –£—Å–ª–æ–≤–∏–µ: user –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω 3+ –¥–Ω—è

2. send_unfinished_reminder(user_id, book_title, book_id, progress):
   - –¢–µ–∫—Å—Ç: "üìñ –í—ã –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–∏—Å—å –Ω–∞ {progress}% –∫–Ω–∏–≥–∏ ¬´{title}¬ª. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–µ–Ω–∏–µ?"
   - –ö–Ω–æ–ø–∫–∞: "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —á—Ç–µ–Ω–∏–µ" (web_app ‚Üí /reader/{id})
   - –£—Å–ª–æ–≤–∏–µ: progress > 10% AND < 100% AND lastReadAt > 7 –¥–Ω–µ–π

3. send_new_book_notification(user_id, book, genre):
   - –û—Ç–ø—Ä–∞–≤—å —Ñ–æ—Ç–æ –æ–±–ª–æ–∂–∫–∏ (book.coverUrl)
   - Caption: "üÜï –ù–æ–≤–∞—è –∫–Ω–∏–≥–∞ –≤ –∂–∞–Ω—Ä–µ {genre}!\nüìï {title}\n‚úçÔ∏è {author}\nüí∞ {price –∏–ª–∏ '–ë–µ—Å–ø–ª–∞—Ç–Ω–æ'}"
   - –ö–Ω–æ–ø–∫–∞: "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–Ω–∏–≥—É" (web_app ‚Üí ?startapp=book_{id})
   - –£—Å–ª–æ–≤–∏–µ: –∂–∞–Ω—Ä –≤ favorites –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

–°–æ–∑–¥–∞–π telegram-bot/scheduler.py

–ò—Å–ø–æ–ª—å–∑—É–π APScheduler –¥–ª—è:
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 10:00)
2. –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ –Ω–µ–¥–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –∫–Ω–∏–≥–∞—Ö (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 20:00)
3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∫–Ω–∏–≥–∞—Ö (–ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –ë–î)

–ü–æ–¥–∫–ª—é—á–∏ PostgreSQL –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö –∏ –∏—Ö –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö

üé® –≠–¢–ê–ü 10: UI/UX –ü–û–õ–ò–†–û–í–ö–ê
–®–∞–≥ 10.1: –¢–µ–º–Ω–∞—è —Ç–µ–º–∞
–ü—Ä–æ–º–ø—Ç:
–†–µ–∞–ª–∏–∑—É–π –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã:

1. –ü—Ä–∏–º–µ–Ω—è–π Telegram theme –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
   - Light theme: bg #F8F9FE, text #1A1A2E
   - Dark theme: bg #0F0F1E, text #FFFFFF, cards —Å –Ω–µ–æ–Ω–æ–≤—ã–º —Å–≤–µ—á–µ–Ω–∏–µ–º

2. –°–æ–∑–¥–∞–π CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–¥ –æ–±–µ —Ç–µ–º—ã –≤ tailwind.config.js

3. –°–ª—É—à–∞–π tg.onEvent('themeChanged') –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–π –∫–ª–∞—Å—Å .dark –Ω–∞ <html>

4. –°–æ—Ö—Ä–∞–Ω—è–π –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ CloudStorage (–µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∏–ª –≤—Ä—É—á–Ω—É—é)
–®–∞–≥ 10.2: –ê–Ω–∏–º–∞—Ü–∏–∏ –∏ transitions
–ü—Ä–æ–º–ø—Ç:
–î–æ–±–∞–≤—å –∞–Ω–∏–º–∞—Ü–∏–∏ —Å Framer Motion:

1. –ö–∞—Ä—Ç–æ—á–∫–∏ –∫–Ω–∏–≥:
   - –ü–æ—è–≤–ª–µ–Ω–∏–µ: opacity 0‚Üí1 + translateY 20‚Üí0
   - Stagger –ø–æ 0.1s –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏
   - Hover: scale 1 ‚Üí 1.05

2. –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞:
   - –û—Ç–∫—Ä—ã—Ç–∏–µ: opacity 0‚Üí1 + scale 0.95‚Üí1
   - –ó–∞–∫—Ä—ã—Ç–∏–µ: reverse –∞–Ω–∏–º–∞—Ü–∏—è
   - Overlay: opacity 0‚Üí0.5

3. –°—Ç—Ä–∞–Ω–∏—Ü—ã:
   - –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏: fade + slide
   - Exit animation –ø–µ—Ä–µ–¥ —Å–º–µ–Ω–æ–π —Ä–æ—É—Ç–∞

4. Skeleton loading:
   - –ü—É–ª—å—Å–∏—Ä—É—é—â–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–ª–æ–∂–µ–∫
   - Shimmer —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è —Ç–µ–∫—Å—Ç–∞

–í—Å–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å <300ms –¥–ª—è –æ—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç–∏
–®–∞–≥ 10.3: –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –∂–µ—Å—Ç—ã
–ü—Ä–æ–º–ø—Ç:
–û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:

1. Touch gestures:
   - Swipe –¥–ª—è –ª–∏—Å—Ç–∞–Ω–∏—è –∫–Ω–∏–≥ –≤ reader (react-swipeable)
   - Pull-to-refresh –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
   - Long press –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é

2. Responsive breakpoints:
   - Mobile: < 640px (2 –∫–æ–ª–æ–Ω–∫–∏ –∫–Ω–∏–≥)
   - Tablet: 640-1024px (2 –∫–æ–ª–æ–Ω–∫–∏)
   - Desktop: > 1024px (3 –∫–æ–ª–æ–Ω–∫–∏)

3. Safe areas –¥–ª—è iOS:
   - padding: env(safe-area-inset-*)
   - –£—á–∏—Ç—ã–≤–∞–π tg.viewportHeight –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã

4. Performance:
   - Lazy loading –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
   - Virtual scrolling –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ (react-window)
   - Code splitting –ø–æ —Ä–æ—É—Ç–∞–º

5. –û—Ç–∫–ª—é—á–∏ bounce —ç—Ñ—Ñ–µ–∫—Ç:
   - overscroll-behavior: none
   - –§–∏–∫—Å–∏—Ä—É–π body –ø—Ä–∏ –æ—Ç–∫—Ä—ã—Ç—ã—Ö –º–æ–¥–∞–ª–∫–∞—Ö

üöÄ –≠–¢–ê–ü 11: –î–ï–ü–õ–û–ô
–®–∞–≥ 11.1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –¥–µ–ø–ª–æ—é
–ü—Ä–æ–º–ø—Ç:
–ù–∞—Å—Ç—Ä–æ–π –æ–∫—Ä—É–∂–µ–Ω–∏–µ –¥–ª—è –¥–µ–ø–ª–æ—è:

1. Frontend (Vercel):
   - –°–æ–∑–¥–∞–π vercel.json —Å rewrites –¥–ª—è SPA
   - –ù–∞—Å—Ç—Ä–æ–π environment variables –≤ Vercel Dashboard

–î–æ–±–∞–≤—å X-Frame-Options –¥–ª—è Telegram WebView
Build command: npm run build
Output directory: dist


Backend (Railway/Render):

–°–æ–∑–¥–∞–π Dockerfile –¥–ª—è Node.js –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ù–∞—Å—Ç—Ä–æ–π DATABASE_URL –¥–ª—è PostgreSQL
–ù–∞—Å—Ç—Ä–æ–π –≤—Å–µ environment variables
Health check endpoint: GET /health


Telegram Bot (Railway/Heroku):

–°–æ–∑–¥–∞–π Dockerfile –¥–ª—è Python –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–ù–∞—Å—Ç—Ä–æ–π webhook URL –¥–ª—è payment
requirements.txt —Å pinned –≤–µ—Ä—Å–∏—è–º–∏


–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase/Railway):

PostgreSQL 14+
–ù–∞—Å—Ç—Ä–æ–π connection pooling
–°–æ–∑–¥–∞–π backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—é




### –®–∞–≥ 11.2: CI/CD

**–ü—Ä–æ–º–ø—Ç:**
–ù–∞—Å—Ç—Ä–æ–π GitHub Actions –¥–ª—è:

Frontend:

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
Build –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
–î–µ–ø–ª–æ–π –Ω–∞ Vercel –ø—Ä–∏ push –≤ main


Backend:

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
Lint –∏ type-check
Prisma migrations
–î–µ–ø–ª–æ–π –Ω–∞ Railway –ø—Ä–∏ push –≤ main


Telegram Bot:

–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Python
–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
–î–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ main



–î–æ–±–∞–≤—å environments: development, staging, production

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –ß–ï–ö–õ–ò–°–¢

**–ü—Ä–æ–º–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:**
–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
Frontend:

 Telegram Web App SDK –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω
 –í—Å–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–¥–∞–ø—Ç–∏–≤–Ω—ã (mobile + desktop)
 –¢–µ–º–Ω–∞—è/—Å–≤–µ—Ç–ª–∞—è —Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
 –í—Å–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø–ª–∞–≤–Ω—ã–µ (<300ms)
 Main Button –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–º–µ—Å—Ç–æ custom –∫–Ω–æ–ø–æ–∫
 Back Button –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ –Ω–∞–≤–∏–≥–∞—Ü–∏—é
 Haptic Feedback –Ω–∞ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏—è—Ö
 CloudStorage –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ reader
 Error boundaries –∏ loading states

Backend:

 Telegram initData –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç
 JWT auth –Ω–∞—Å—Ç—Ä–æ–µ–Ω
 –í—Å–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∫–Ω–∏–≥
 Payment —á–µ—Ä–µ–∑ Telegram Stars
 Webhook –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –æ–ø–ª–∞—Ç—ã
 Rate limiting –Ω–∞—Å—Ç—Ä–æ–µ–Ω
 CORS –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω

Telegram Bot:

 –ö–æ–º–∞–Ω–¥—ã /start, /library —Ä–∞–±–æ—Ç–∞—é—Ç
 WebApp –∫–Ω–æ–ø–∫–∏ —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL
 –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –∑–∞–ø—É—â–µ–Ω–∞
 APScheduler –Ω–∞—Å—Ç—Ä–æ–µ–Ω
 Webhook –¥–ª—è payments —Ä–∞–±–æ—Ç–∞–µ—Ç

–î–µ–ø–ª–æ–π:

 Frontend –Ω–∞ Vercel
 Backend –Ω–∞ Railway/Render
 Bot –Ω–∞ Railway/Heroku
 PostgreSQL –Ω–∞—Å—Ç—Ä–æ–µ–Ω
 –í—Å–µ environment variables —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
 SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
 Custom domain –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)


---

## üìù –ß–¢–û –ü–û–¢–†–ï–ë–£–ï–¢–°–Ø –û–¢ –¢–ï–ë–Ø

### üîë API Keys –∏ –¢–æ–∫–µ–Ω—ã

1. **Telegram Bot Token**
   - –ü–æ–ª—É—á–∏—Ç—å: @BotFather ‚Üí /newbot
   - –§–æ—Ä–º–∞—Ç: `1234567890:ABCdefGHIjklMNOpqrsTUVwxyz`
   - –ì–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: Backend (BOT_TOKEN), Telegram Bot
   - –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å Mini App: @BotFather ‚Üí /newapp ‚Üí —É–∫–∞–∑–∞—Ç—å URL

2. **JWT Secrets**
   - –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π —Å–ª—É—á–∞–π–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ (32+ —Å–∏–º–≤–æ–ª–∞)
   - –ù—É–∂–Ω–æ 2 —Å–µ–∫—Ä–µ—Ç–∞:
     * `JWT_SECRET` - –¥–ª—è access token
     * `JWT_REFRESH_SECRET` - –¥–ª—è refresh token
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è: `openssl rand -base64 32`

3. **PostgreSQL Database URL**
   - –ì–¥–µ –ø–æ–ª—É—á–∏—Ç—å: Supabase / Railway / Render / Neon
   - –§–æ—Ä–º–∞—Ç: `postgresql://user:password@host:5432/database`
   - –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏: Docker –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π PostgreSQL

4. **–ÆKassa (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Telegram Stars)**
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: https://yookassa.ru
   - –ü–æ–ª—É—á–∏—Ç—å: Shop ID –∏ Secret Key
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å webhook URL
   - –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—à—å —Ç–æ–ª—å–∫–æ Telegram Payments

5. **USDT Wallets (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)**
   - TON Wallet Address
   - TRC20 Wallet Address
   - –ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–∞ MVP

6. **S3/R2 –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤**
   - AWS S3 –∏–ª–∏ Cloudflare R2
   - –ü–æ–ª—É—á–∏—Ç—å: Access Key ID, Secret Access Key, Bucket Name
   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: —Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª—ã –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è production)

### üì¶ –°–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

1. **Vercel** (Frontend hosting)
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è: https://vercel.com
   - –ü–æ–¥–∫–ª—é—á–∏—Ç—å GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω: –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è MVP

2. **Railway / Render** (Backend + Bot hosting)
   - Railway: https://railway.app (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)
   - Render: https://render.com
   - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω: –µ—Å—Ç—å, –Ω–æ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏

3. **Supabase / Railway / Neon** (PostgreSQL)
   - Supabase: https://supabase.com (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –¥–ª—è MVP)
   - Railway: –≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è PostgreSQL
   - Neon: https://neon.tech
   - –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω: 500MB –Ω–∞ Supabase

4. **Cloudflare R2** (File storage, –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - https://cloudflare.com/r2
   - –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞: AWS S3, Backblaze B2

### üìö –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–ö–Ω–∏–≥–∏ (PDF —Ñ–∞–π–ª—ã)**
   - –ú–∏–Ω–∏–º—É–º 20-30 –∫–Ω–∏–≥ –¥–ª—è –¥–µ–º–æ
   - –û–±–ª–æ–∂–∫–∏ (JPG/PNG, —Ä–µ–∫–æ–º–µ–Ω–¥—É—é 600x900px)
   - –û–ø–∏—Å–∞–Ω–∏—è –∫–Ω–∏–≥ (2-3 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)
   - –ê–≤—Ç–æ—Ä—ã, –∂–∞–Ω—Ä—ã
   - –¶–µ–Ω—ã (–∏–ª–∏ –æ—Ç–º–µ—Ç—å –∫–∞–∫ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ)

2. **–î–∏–∑–∞–π–Ω –∞—Å—Å–µ—Ç—ã**
   - Logo "Bookly" (SVG)
   - Placeholder –¥–ª—è –æ–±–ª–æ–∂–µ–∫ –±–µ–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –ò–∫–æ–Ω–∫–∏ (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π Lucide React)

### üîß –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **Node.js** - –≤–µ—Ä—Å–∏—è 20.x
2. **Python** - –≤–µ—Ä—Å–∏—è 3.11+
3. **PostgreSQL** - –≤–µ—Ä—Å–∏—è 14+
4. **Git**
5. **VS Code** (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è):
   - ESLint
   - Prettier
   - Tailwind CSS IntelliSense
   - Prisma

### üìã Environment Variables Template

**Frontend (.env):**
```env
VITE_API_URL=http://localhost:3000/api
VITE_MINI_APP_URL=https://t.me/bookly_bot/app
```

**Backend (.env):**
```env
DATABASE_URL=postgresql://...
JWT_SECRET=your_jwt_secret_here
JWT_REFRESH_SECRET=your_refresh_secret_here
TELEGRAM_BOT_TOKEN=1234567890:ABC...
FRONTEND_URL=https://bookly.vercel.app

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
YOOKASSA_SHOP_ID=
YOOKASSA_SECRET_KEY=
AWS_S3_BUCKET=
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
```

**Telegram Bot (.env):**
```env
TELEGRAM_BOT_TOKEN=1234567890:ABC...
DATABASE_URL=postgresql://...
MINI_APP_URL=https://bookly.vercel.app
BACKEND_API_URL=https://api.bookly.com
```

---

## üéØ –ü–û–°–õ–ï–î–û–í–ê–¢–ï–õ–¨–ù–û–°–¢–¨ –î–ï–ô–°–¢–í–ò–ô

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
1. –°–æ–∑–¥–∞–π Telegram –±–æ—Ç–∞ —á–µ—Ä–µ–∑ @BotFather
2. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Å—è –Ω–∞ Vercel, Railway, Supabase
3. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π JWT secrets
4. –°–∫–ª–æ–Ω–∏—Ä—É–π —Å—Ç–∞—Ä—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω –ø—Ä–æ–µ–∫—Ç–∞

### –®–∞–≥ 2: –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
1. –ó–∞–ø—É—Å—Ç–∏ PostgreSQL –ª–æ–∫–∞–ª—å–Ω–æ
2. –í—ã–ø–æ–ª–Ω–∏ Prisma migrations
3. –ó–∞–ø—É—Å—Ç–∏ Backend (port 3000)
4. –ó–∞–ø—É—Å—Ç–∏ Frontend (port 5173)
5. –ù–∞—Å—Ç—Ä–æ–π ngrok –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Telegram WebApp

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –û—Ç–∫—Ä–æ–π –±–æ—Ç–∞ –≤ Telegram
2. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É "–û—Ç–∫—Ä—ã—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É"
3. –ü—Ä–æ–≤–µ—Ä—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
4. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏

### –®–∞–≥ 4: –î–µ–ø–ª–æ–π
1. Deploy Frontend –Ω–∞ Vercel
2. Deploy Backend –Ω–∞ Railway
3. Deploy Bot –Ω–∞ Railway
4. –ù–∞—Å—Ç—Ä–æ–π production DATABASE_URL
5. –£—Å—Ç–∞–Ω–æ–≤–∏ –≤—Å–µ environment variables
6. –û–±–Ω–æ–≤–∏ Telegram Bot webhook URL
7. –û–±–Ω–æ–≤–∏ Mini App URL –≤ @BotFather

–ì–æ—Ç–æ–≤–æ! üöÄ